webpackJsonp([12],{"0B93":function(e,t){},FQn5:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=a("/KFX"),l=a("cXVZ"),r={data:function(){return{pageType:2,searchForm:{option:"",inputText:""},searchParam:{},warningForm:{},keepValuePlan:{},programForm:{weight:"",realDeposit:""},currentPage:1,pageSize:1,totalPage:100,dialogFormVisible:!1,methodVisible:!1,warehouseInnerVisible:!1,selectlistRow:[],addWareHouseTable:[],wareHouseTable:[],tableData:[]}},mounted:function(){this.searchInfo()},methods:{getOption:function(e,t){this.searchForm.option=e,this.searchForm.inputText=t},searchInfo:function(){var e=this;this.searchParam[this.searchForm.option]=this.searchForm.inputText,this.axios.get(l.i,{params:{pageSize:this.pageSize,pageNum:this.currentPage,search:this.searchParam,status:0}}).then(function(t){e.tableData=t.data.resData,e.totalPage=t.data.page.total,e.pageSize=t.data.page.pageSize,e.currentPage=t.data.page.current,e.searchParam={}}).catch(function(e){console.log(e)})},clearSearchInfo:function(){this.searchForm.option="",this.searchForm.inputText=""},openDialog:function(e,t){"operate"==t?(this.dialogFormVisible=!0,this.warningForm=e,this.programForm.contractId=e.contractNo,this.programForm.warningPrice=e.warningPrice,this.programForm.totalPrice=e.totalPrice,this.programForm.contractDeposit=e.deposit,this.programForm.id=e.id,this.keepValuePlan.x=e.originalPrice/e.goodsPrice-e.amount,this.keepValuePlan.y=e.originalPrice-e.amount*e.goodsPrice):"method"==t&&(this.methodVisible=!0)},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e)},formatter:function(e,t){return e.pledgeRate+"%"},pledgeRateFormatter:function(e,t){return e.totalLoan/(e.goodsPrice*e.amount+e.deposit)},contactFormatter:function(e,t){return e.customerLinkman+" "+e.customerPhone},addWarehouse:function(){this.programForm.weight>0&&(this.warehouseInnerVisible=!0)},selectRow:function(e){this.selectlistRow=e},addRow:function(){var e={rowNum:this.addWareHouseTable.length+1,address:this.address,name:this.name,weather:this.weather,phone:this.phone,date:this.date,mdate:this.mdate,loveer:this.loveer};this.addWareHouseTable.unshift(e)},delData:function(){for(var e=this,t=0;t<this.selectlistRow.length;t++){this.selectlistRow.forEach(function(t,a){e.addWareHouseTable.forEach(function(a,o){t.rowNum===a.rowNum&&e.addWareHouseTable.splice(o,1)})})}this.$refs.addWareHouseTable.clearSelection()}},components:{vSearch:o.a}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("vSearch",{attrs:{pageType:e.pageType},on:{getOption:e.getOption,searchInfo:e.searchInfo,clearSearchInfo:e.clearSearchInfo}}),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"max-height":"675","default-sort":{prop:"date",order:"descending"}}},[a("el-table-column",{attrs:{label:"操作",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(a){a.preventDefault(),e.openDialog(t.row,"operate")}}},[e._v("\n          处理\n        ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"customerName",label:"客户名称",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"customerNo",label:"客户号",width:"160"}}),e._v(" "),a("el-table-column",{attrs:{prop:"contractNo",label:"合同编号",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsPrice",label:"当前价格",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"warningPrice",label:"预警价格",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"pledgeRate",label:"当前担保率",formatter:e.pledgeRateFormatter}}),e._v(" "),a("el-table-column",{attrs:{prop:"contactMember",label:"联系客户",formatter:e.contactFormatter,sortable:""}})],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"prev, pager, next, jumper",total:e.totalPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1),e._v(" "),a("el-dialog",{attrs:{title:"处理",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-tabs",{attrs:{type:"border-card"}},[a("el-tab-pane",{attrs:{label:"价值预警"}},[a("table",{staticClass:"value-warning"},[a("tr",[a("th",[e._v("放款金额")]),e._v(" "),a("td",[e._v(e._s(e.warningForm.totalLoan))])]),e._v(" "),a("tr",[a("th",[e._v("仓单原价值")]),e._v(" "),a("td",[e._v(e._s(e.warningForm.originalPrice))]),e._v(" "),a("th",[e._v("仓单现价值")]),e._v(" "),a("td",[e._v(e._s(e.warningForm.amount*e.warningForm.goodsPrice))])]),e._v(" "),a("tr",[a("th",[e._v("原保证金")]),e._v(" "),a("td",[e._v(e._s(e.warningForm.deposit))]),e._v(" "),a("th",[e._v("现保证金")]),e._v(" "),a("td",[e._v(e._s(e.warningForm.realDeposit))])])])]),e._v(" "),a("el-tab-pane",{attrs:{label:"保值方案"}},[a("div",{staticClass:"program"},[e._v("\n          需提醒客户追加"+e._s(e.keepValuePlan.x>0?e.keepValuePlan.x:"-")+"吨的货物或"+e._s(e.keepValuePlan.y>0?e.keepValuePlan.y:"-")+"元保证金。\n        ")]),e._v(" "),a("el-button",{staticClass:"dialog-button",attrs:{type:"primary"}},[e._v("确定")])],1),e._v(" "),a("el-tab-pane",{attrs:{label:"风险处理"}},[a("div",{staticClass:"program"},[e._v("\n          客户实际追加\n          "),a("el-input",{staticStyle:{width:"120px"},attrs:{clearable:""},on:{blur:e.addWarehouse},model:{value:e.programForm.weight,callback:function(t){e.$set(e.programForm,"weight",t)},expression:"programForm.weight"}}),e._v("\n          吨的货物，\n          "),a("el-input",{staticStyle:{width:"120px"},attrs:{clearable:""},model:{value:e.programForm.realDeposit,callback:function(t){e.$set(e.programForm,"realDeposit",t)},expression:"programForm.realDeposit"}}),e._v("\n          元保证金。\n        ")],1),e._v(" "),a("el-button",{staticClass:"dialog-button",attrs:{type:"primary"}},[e._v("确定")])],1)],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"追加仓单：",visible:e.warehouseInnerVisible,width:"1200px","append-to-body":""},on:{"update:visible":function(t){e.warehouseInnerVisible=t}}},[a("div",{staticClass:"tableDate"},[a("div",{staticClass:"button",staticStyle:{width:"3%",float:"right"}},[a("P",[a("el-button",{staticClass:"el-icon-plus",on:{click:function(t){t.preventDefault(),e.addRow()}}})],1),e._v(" "),a("p",[a("el-button",{staticClass:"el-icon-minus",on:{click:function(t){t.preventDefault(),e.delData()}}})],1)],1),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{ref:"addWareHouseTable",staticStyle:{width:"95%"},attrs:{data:e.addWareHouseTable,"tooltip-effect":"dark",border:"",stripe:""},on:{"selection-change":e.selectRow}},[a("el-table-column",{attrs:{type:"selection",width:"45",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"仓单编号",align:"center",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.address,callback:function(a){e.$set(t.row,"address",a)},expression:"scope.row.address"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品种"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"商品名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.loveer,callback:function(a){e.$set(t.row,"loveer",a)},expression:"scope.row.loveer"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"品牌/牌号"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.weather,callback:function(a){e.$set(t.row,"weather",a)},expression:"scope.row.weather"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"质量标准"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.phone,callback:function(a){e.$set(t.row,"phone",a)},expression:"scope.row.phone"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"包装规格"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.date,callback:function(a){e.$set(t.row,"date",a)},expression:"scope.row.date"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.mdate,callback:function(a){e.$set(t.row,"mdate",a)},expression:"scope.row.mdate"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"计量单位"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.mdate,callback:function(a){e.$set(t.row,"mdate",a)},expression:"scope.row.mdate"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"仓库名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.mdate,callback:function(a){e.$set(t.row,"mdate",a)},expression:"scope.row.mdate"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"仓库地址"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.mdate,callback:function(a){e.$set(t.row,"mdate",a)},expression:"scope.row.mdate"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"联系人"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.mdate,callback:function(a){e.$set(t.row,"mdate",a)},expression:"scope.row.mdate"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"联系电话"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.mdate,callback:function(a){e.$set(t.row,"mdate",a)},expression:"scope.row.mdate"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"货物位置"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.mdate,callback:function(a){e.$set(t.row,"mdate",a)},expression:"scope.row.mdate"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"货物真实性"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.mdate,callback:function(a){e.$set(t.row,"mdate",a)},expression:"scope.row.mdate"}})]}}])})],1)],1)]),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"}},[e._v("录 入")])],1)])],1)},staticRenderFns:[]};var s=a("VU/8")(r,n,!1,function(e){a("0B93")},null,null);t.default=s.exports}});
//# sourceMappingURL=12.f3b4d0100610615362bf.js.map