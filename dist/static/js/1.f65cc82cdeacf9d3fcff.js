webpackJsonp([1],{"+n3b":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o("BO1k"),r=o.n(a),s=o("/KFX"),i=o("yFm/"),n=o("b2s4"),l=o("cXVZ"),c=(o("Wn42"),{data:function(){return{searchForm:{option:"",inputText:""},searchParam:{},searchWarehouseId:"",programForm:{weight:"",ammount:""},tableData:[],contractForm:{},wareHouseTable:[],addWareHouseTable:[],wareHouseInfo:{},wareHouseInfoCurrent:{},wareHouseList:[],recordList:{fileTypeZero:[],fileTypeOne:[]},warehouseForm:{},selectlistRow:[],selectlistRow1:[],currentPage:1,pageSize:10,totalPage:1,dialogFormVisible:!1,addContractVisible:!1,warehouseVisible:!1,warehouseInnerVisible:!1,accountRecordVisible:!1,monitorVisible:!1,methodVisible:!1,liquidated:!1,form:{},formLabelWidth:"135px",pageType:1,keepValuePlan:{},state:"",timeout:null,fileList:[],rules:n.a,fileForm:{file:""},goodsList:[]}},mounted:function(){this.searchInfo()},methods:{getOption:function(e,t){this.searchForm.option=e,this.searchForm.inputText=t},searchInfo:function(e,t){var o=this;this.searchParam[this.searchForm.option]=this.searchForm.inputText,this.axios.get(l.p,{params:{pageSize:this.pageSize,pageNum:this.currentPage,search:this.searchParam,orderField:e,orderType:t}}).then(function(e){200==e.data.resCode?(o.tableData=e.data.resData,o.totalPage=e.data.page.total,o.pageSize=e.data.page.pageSize,o.currentPage=e.data.page.current,o.searchParam={}):o.$message.error(e.data.resMsg)}).catch(function(e){console.log(e)})},clearSearchInfo:function(){this.searchForm.option="",this.searchForm.inputText=""},openDialog:function(e,t){if("wareHouse"==t)this.warehouseVisible=!0,e.warehouseWarrantList.length>0&&(this.wareHouseList=e.warehouseWarrantList,this.wareHouseInfo=e.warehouseWarrantList[0]),this.wareHouseInfoCurrent.customerName=e.customerName,this.wareHouseInfoCurrent.contractId=e.id;else if("operate"==t)this.dialogFormVisible=!0,this.addOperateStatus(e.id,0),this.form=e,e.warehouseWarrantList.length>1?this.form.wareHouseId=e.warehouseWarrantList[0].wwNo+"~"+e.warehouseWarrantList[e.warehouseWarrantList.length-1].wwNo:1==e.warehouseWarrantList.length?this.form.wareHouseId=e.warehouseWarrantList[0].wwNo:this.form.wareHouseId="";else if("contract"==t)this.getGoods(),this.addContractVisible=!0;else if("account"==t){this.recordList={fileTypeZero:[],fileTypeOne:[]},this.accountRecordVisible=!0;for(var o=0;o<e.contractFileList.length;o++)0==e.contractFileList[o].fileType&&this.recordList.fileTypeZero.push(e.contractFileList[o]),1==e.contractFileList[o].fileType&&this.recordList.fileTypeOne.push(e.contractFileList[o]);this.recordList.contractNo=e.contractNo,this.recordList.customerName=e.customerName,this.recordList.id=e.id}else"monitor"==t?(this.monitorVisible=!0,this.wareHouseInfo={},this.state="",this.wareHouseList=e.warehouseWarrantList):"method"==t&&(this.methodVisible=!0,this.keepValuePlan.x=e.originalPrice/e.goodsPrice-e.amount,this.keepValuePlan.y=e.originalPrice-e.amount*e.goodsPrice)},dialogFormVisibleChange:function(e){this.dialogFormVisible=e},formatter:function(e,t){return e.address},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){this.searchInfo()},deleteRecord:function(e){var t=this;"合同"==e?this.$confirm("此操作删除该合同, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.axios.delete(l.o+"/"+t.form.id).then(function(e){200==e.data.resCode?(t.$message({type:"success",message:"删除成功!"}),t.dialogFormVisible=!1,t.$router.push("/GetContract"),t.searchInfo()):t.$message.error(e.data.resMsg)}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})}):"仓单"==e&&this.$confirm("此操作删除该仓单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.axios.delete(l.k+"/"+t.wareHouseInfo.id).then(function(e){200==e.data.resCode?(t.$message({type:"success",message:"删除成功!"}),t.warehouseVisible=!1,t.$router.push("/GetContract"),t.wareHouseInfo={},t.searchInfo()):t.$message.error(e.data.resMsg)}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},getGoods:function(){var e=this;this.axios.get(l.i).then(function(t){200==t.data.resCode?e.goodsList=t.data.resData:e.$message.error(t.data.resMsg)}).catch(function(e){console.log(e)})},addGoodName:function(e){var t;t=this.goodsList.find(function(t){return t.code===e}),console.log(t.name),this.contractForm.goodsName=t.name},statusSwitch:function(e,t){switch(e.status){case 0:return"存续";case 1:return"平仓";case 2:return"归档"}},priceFormatter:function(e,t){return this.tofixed(e.originalPrice)+" / "+this.tofixed(e.amount*e.goodsPrice)},wwIdFormatter:function(e,t){return 0==e.warehouseWarrantList.length?"————":1==e.warehouseWarrantList.length?e.warehouseWarrantList[0].wwNo:e.warehouseWarrantList.length>1?e.warehouseWarrantList[0].wwNo+"~"+e.warehouseWarrantList[e.warehouseWarrantList.length-1].wwNo+"("+e.warehouseWarrantList.length+")":void 0},pledgeRateFormatter:function(e){return(100*new Number(e.totalLoan/(parseInt(e.goodsPrice)*parseInt(e.amount)+parseInt(e.deposit)))).toFixed(2)+"%"},dateFormat:function(e){return this.common.fullTime(e)},dateFormat2:function(e,t){return this.common.fullTime(e.loanEndtime)},selectRow:function(e){this.selectlistRow=e},selectRow1:function(e){this.selectlistRow1=e},addRow:function(){var e={rowNum:this.wareHouseTable.length+1,address:this.address,name:this.name,weather:this.weather,phone:this.phone,date:this.date,mdate:this.mdate,loveer:this.loveer};this.wareHouseTable.unshift(e)},addRow1:function(){var e={rowNum:this.addWareHouseTable.length+1,address:this.address,name:this.name,weather:this.weather,phone:this.phone,date:this.date,mdate:this.mdate,loveer:this.loveer};this.addWareHouseTable.unshift(e)},delData:function(){for(var e=this,t=0;t<this.selectlistRow.length;t++){this.selectlistRow.forEach(function(t,o){e.wareHouseTable.forEach(function(o,a){t.rowNum===o.rowNum&&e.wareHouseTable.splice(a,1)})})}this.$refs.wareHouseTable.clearSelection()},delData1:function(){for(var e=this,t=0;t<this.selectlistRow1.length;t++){this.selectlistRow1.forEach(function(t,o){e.addWareHouseTable.forEach(function(o,a){t.rowNum===o.rowNum&&e.addWareHouseTable.splice(a,1)})})}this.$refs.addWareHouseTable.clearSelection()},querySearchAsync:function(e,t){var o=this.wareHouseList,a=!0,s=!1,i=void 0;try{for(var n,l=r()(o);!(a=(n=l.next()).done);a=!0){var c=n.value;c.value=c.wwNo}}catch(e){s=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(s)throw i}}var u=e?o.filter(this.createStateFilter(e)):o;clearTimeout(this.timeout),this.timeout=setTimeout(function(){t(u)},300*Math.random())},createStateFilter:function(e){return function(t){return 0===t.value.toLowerCase().indexOf(e.toLowerCase())}},handleSelect:function(e){this.wareHouseInfo=e},loadWarehouseId:function(){var e=!0,t=!1,o=void 0;try{for(var a,s=r()(this.wareHouseList);!(e=(a=s.next()).done);e=!0){var i=a.value;i.value=i.wwNo}}catch(e){t=!0,o=e}finally{try{!e&&s.return&&s.return()}finally{if(t)throw o}}},monitorClosed:function(){this.wareHouseList=[]},handleRemove:function(e,t){console.log(e,t)},handlePreview:function(e){console.log(e)},handleExceed:function(e,t){this.$message.warning("当前限制选择 1 个文件，本次选择了 "+e.length+" 个文件，共选择了 "+(e.length+t.length)+" 个文件")},beforeRemove:function(e,t){return this.$confirm("确定移除 "+e.name+"？")},deletePayRecord:function(e){var t=this;0==e?this.$confirm("此操作删除该回单, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.axios.delete(l.b+"/"+t.recordList.fileTypeZero[t.$refs.payCarousel.activeIndex].id).then(function(e){200==e.data.resCode?(t.$message({message:e.data.resMsg,type:"success"}),t.searchInfo(),t.accountRecordVisible=!1):t.$message.error(e.data.resMsg)}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})}):1==e&&this.$confirm("此操作删除该发票, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.axios.delete(l.b+"/"+t.recordList.fileTypeOne[t.$refs.payCarousel1.activeIndex].id).then(function(e){200==e.data.resCode?(t.$message({message:e.data.resMsg,type:"success"}),t.searchInfo(),t.accountRecordVisible=!1):t.$message.error(e.data.resMsg)}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},addContract:function(){var e=this;this.$refs.contractForm.validate(function(t){if(!t)return console.log("error submit!!"),!1;var o=e.contractForm;o.warehouseWarrantList=e.wareHouseTable,e.axios.post(l.m,o).then(function(t){200==t.data.resCode?(e.$message({message:"添加成功",type:"success"}),e.addContractVisible=!1,e.contractForm={},e.wareHouseTable=[],e.searchInfo(),e.$router.push("/GetContract")):e.$message.error(t.data.resMsg)}).catch(function(e){console.log(e)})})},download:function(e){var t=l.d+"?contractId="+this.recordList.id+"&fileType="+e;window.open(t)},returnAction:function(){return l.v},uploadData:function(e){return{contractId:this.recordList.id,fileType:e}},sumbitUpload:function(e){0==e?this.$refs.upload.submit():this.$refs.upload1.submit()},sortChange:function(e){"ascending"==e.order?this.searchInfo(e.prop,"asc"):"descending"==e.order?this.searchInfo(e.prop,"desc"):this.searchInfo()},submitWarehouse:function(){var e=this,t={id:this.wareHouseInfoCurrent.contractId,warehouseWarrantList:this.addWareHouseTable};console.log(this.wareHouseInfo.contractId),this.axios.post(l.a,t).then(function(t){200==t.data.resCode?(e.warehouseInnerVisible=!1,e.warehouseVisible=!1,e.searchInfo(),e.addWareHouseTable=[]):e.$message.error(t.data.resMsg)}).catch(function(e){console.log(e)})},uploadSuccess:function(e,t,o){this.$message({message:"上传成功",type:"success"}),this.accountRecordVisible=!1,this.fileList=[],this.searchInfo()},uploadError:function(){this.$message.error("上传失败")},addOperateStatus:function(e,t){var o=this,a={formId:e,formType:t};this.axios.post(l.q,a).then(function(e){200==e.data.resCode?console.log("success"):o.$message.error(e.data.resMsg)}).catch(function(e){console.log(e)})},tofixed:function(e){return this.common.toFixed(e)},clearAddWareHouseTable:function(){this.addWareHouseTable=[]},isUnique:function(e){var t=this,o={contractNo:this.contractForm.contractNo};this.axios.post(l.t,o).then(function(e){200==e.data.resCode||(t.$message.error("该合同编号已存在"),t.contractForm.contractNo="")}).catch(function(e){console.log(e)})}},components:{vSearch:s.a,handleDialog:i.a}}),u={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("vSearch",{attrs:{pageType:e.pageType},on:{getOption:e.getOption,searchInfo:e.searchInfo,clearSearchInfo:e.clearSearchInfo,openDialog:e.openDialog}}),e._v(" "),o("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData,"max-height":"675"},on:{"sort-change":e.sortChange}},[o("el-table-column",{attrs:{label:"操作",width:"60"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(o){o.preventDefault(),e.openDialog(t.row,"operate")}}},[e._v("\n          处理\n        ")])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"contractNo",label:"合同编号",sortable:"",width:"150"}}),e._v(" "),o("el-table-column",{attrs:{prop:"wareHouseId",label:"仓单编号(仓单总数)",formatter:e.wwIdFormatter,width:"180%"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(o){o.preventDefault(),e.openDialog(t.row,"wareHouse")}}},[e._v("\n          "+e._s(t.row.warehouseWarrantList.length>1?t.row.warehouseWarrantList[0].wwNo+"~"+t.row.warehouseWarrantList[t.row.warehouseWarrantList.length-1].wwNo+"("+t.row.warehouseWarrantList.length+")":1==t.row.warehouseWarrantList.length?t.row.warehouseWarrantList[0].wwNo+"(1)":"(0)")+"\n        ")])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"status",label:"仓单状态",sortable:"",formatter:e.statusSwitch,width:"100"}}),e._v(" "),o("el-table-column",{attrs:{prop:"customerName",label:"交易客户",sortable:"",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{prop:"goodsName",label:"品种",sortable:"",width:"70"}}),e._v(" "),o("el-table-column",{attrs:{prop:"contractFileList",label:"出账记录"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(o){o.preventDefault(),e.openDialog(t.row,"account")}}},[e._v("\n          查看\n        ")])]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"仓单总价值/总现价",formatter:e.priceFormatter,sortable:"",width:"180"}}),e._v(" "),o("el-table-column",{attrs:{prop:"deposit",label:"保证金",sortable:"",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{label:"保值方案"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(o){o.preventDefault(),e.openDialog(t.row,"method")}}},[e._v("\n          查看\n        ")])]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"totalLoan",label:"对应放款金额",sortable:"",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.tofixed(t.row.totalLoan))+"\n      ")]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"当前担保率",sortable:"",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.pledgeRateFormatter(t.row))+"\n      ")]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"tradeEndtime",label:"仓单交易到期日",sortable:"",width:"130"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.dateFormat(t.row.tradeEndtime))+"\n      ")]}}])}),e._v(" "),o("el-table-column",{attrs:{prop:"warehouseWarrantList",label:"监控及影像信息",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(o){o.preventDefault(),e.openDialog(t.row,"monitor")}}},[e._v("\n          查看\n        ")])]}}])})],1),e._v(" "),o("div",{staticClass:"pagination"},[o("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,layout:"prev, pager, next, jumper",total:e.totalPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1),e._v(" "),o("handleDialog",{attrs:{dialogFormVisible:e.dialogFormVisible,form:e.form,isDelete:!0},on:{searchInfo:e.searchInfo,dialogFormVisibleChange:e.dialogFormVisibleChange,deleteRecord:e.deleteRecord}}),e._v(" "),o("el-dialog",{attrs:{title:"添加合同",visible:e.addContractVisible,width:"1200px"},on:{"update:visible":function(t){e.addContractVisible=t}}},[o("el-form",{ref:"contractForm",attrs:{model:e.contractForm,inline:!0,rules:e.rules}},[o("el-form-item",{attrs:{label:"客户名称","label-width":e.formLabelWidth,prop:"customerName"}},[o("el-input",{model:{value:e.contractForm.customerName,callback:function(t){e.$set(e.contractForm,"customerName",t)},expression:"contractForm.customerName"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"客户号","label-width":e.formLabelWidth,prop:"customerNo"}},[o("el-input",{model:{value:e.contractForm.customerNo,callback:function(t){e.$set(e.contractForm,"customerNo",t)},expression:"contractForm.customerNo"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"仓单品种","label-width":e.formLabelWidth,prop:"goodsCode"}},[o("el-select",{attrs:{placeholder:"请选择"},on:{change:e.addGoodName},model:{value:e.contractForm.goodsCode,callback:function(t){e.$set(e.contractForm,"goodsCode",t)},expression:"contractForm.goodsCode"}},e._l(e.goodsList,function(e){return o("el-option",{key:e.code,attrs:{label:e.name,value:e.code}})}),1)],1),e._v(" "),o("el-form-item",{attrs:{label:"仓单原价值","label-width":e.formLabelWidth,prop:"originalPrice"}},[o("el-input",{model:{value:e.contractForm.originalPrice,callback:function(t){e.$set(e.contractForm,"originalPrice",t)},expression:"contractForm.originalPrice"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"合同编号","label-width":e.formLabelWidth,prop:"contractNo"}},[o("el-input",{on:{blur:function(t){e.isUnique(e.contractForm.contractNo)}},model:{value:e.contractForm.contractNo,callback:function(t){e.$set(e.contractForm,"contractNo",t)},expression:"contractForm.contractNo"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"联系人","label-width":e.formLabelWidth,prop:"customerLinkman"}},[o("el-input",{model:{value:e.contractForm.customerLinkman,callback:function(t){e.$set(e.contractForm,"customerLinkman",t)},expression:"contractForm.customerLinkman"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"联系电话","label-width":e.formLabelWidth,prop:"customerPhone"}},[o("el-input",{model:{value:e.contractForm.customerPhone,callback:function(t){e.$set(e.contractForm,"customerPhone",t)},expression:"contractForm.customerPhone"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"交货时间","label-width":e.formLabelWidth,prop:"deliveryTime"}},[o("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择交货时间","value-format":"timestamp"},model:{value:e.contractForm.deliveryTime,callback:function(t){e.$set(e.contractForm,"deliveryTime",t)},expression:"contractForm.deliveryTime"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"放款金额","label-width":e.formLabelWidth,prop:"totalLoan"}},[o("el-input",{model:{value:e.contractForm.totalLoan,callback:function(t){e.$set(e.contractForm,"totalLoan",t)},expression:"contractForm.totalLoan"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"合同交易到期日","label-width":e.formLabelWidth,prop:"tradeEndtime"}},[o("el-date-picker",{staticStyle:{width:"200px"},attrs:{type:"date",placeholder:"选择合同交易到期日","value-format":"timestamp"},model:{value:e.contractForm.tradeEndtime,callback:function(t){e.$set(e.contractForm,"tradeEndtime",t)},expression:"contractForm.tradeEndtime"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"交货地点","label-width":e.formLabelWidth,prop:"deliveryLocation"}},[o("el-input",{model:{value:e.contractForm.deliveryLocation,callback:function(t){e.$set(e.contractForm,"deliveryLocation",t)},expression:"contractForm.deliveryLocation"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"追保率","label-width":e.formLabelWidth,prop:"recoveryRate"}},[o("el-input",{staticStyle:{width:"70px"},model:{value:e.contractForm.recoveryRate,callback:function(t){e.$set(e.contractForm,"recoveryRate",t)},expression:"contractForm.recoveryRate"}}),e._v("%\n      ")],1)],1),e._v(" "),o("span",{staticClass:"dialog-title"},[e._v("仓单信息")]),e._v(" "),o("div",{staticClass:"tableDate"},[o("div",{staticClass:"button",staticStyle:{width:"3%",float:"right"}},[o("P",[o("el-button",{staticClass:"el-icon-plus",on:{click:function(t){t.preventDefault(),e.addRow()}}})],1),e._v(" "),o("p",[o("el-button",{staticClass:"el-icon-minus",on:{click:function(t){t.preventDefault(),e.delData()}}})],1)],1),e._v(" "),o("div",{staticClass:"table"},[o("el-table",{ref:"wareHouseTable",staticStyle:{width:"95%"},attrs:{data:e.wareHouseTable,"tooltip-effect":"dark",border:"",stripe:""},on:{"selection-change":e.selectRow}},[o("el-table-column",{attrs:{type:"selection",width:"45",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{label:"仓单编号",align:"center",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.wwNo,callback:function(o){e.$set(t.row,"wwNo",o)},expression:"scope.row.wwNo"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"商品名称",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.goodsName,callback:function(o){e.$set(t.row,"goodsName",o)},expression:"scope.row.goodsName"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"品牌/牌号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.brand,callback:function(o){e.$set(t.row,"brand",o)},expression:"scope.row.brand"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"质量标准",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.qualityStandard,callback:function(o){e.$set(t.row,"qualityStandard",o)},expression:"scope.row.qualityStandard"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"包装规格",width:"115"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.packingSpecification,callback:function(o){e.$set(t.row,"packingSpecification",o)},expression:"scope.row.packingSpecification"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"数量",width:"105"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.quantity,callback:function(o){e.$set(t.row,"quantity",o)},expression:"scope.row.quantity"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"计量单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.unit,callback:function(o){e.$set(t.row,"unit",o)},expression:"scope.row.unit"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"仓库名称",width:"115"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.warehouseName,callback:function(o){e.$set(t.row,"warehouseName",o)},expression:"scope.row.warehouseName"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"仓库地址",width:"205"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.warehouseAddress,callback:function(o){e.$set(t.row,"warehouseAddress",o)},expression:"scope.row.warehouseAddress"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"联系人",width:"115"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.linkman,callback:function(o){e.$set(t.row,"linkman",o)},expression:"scope.row.linkman"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"联系电话",width:"165"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.linkPhone,callback:function(o){e.$set(t.row,"linkPhone",o)},expression:"scope.row.linkPhone"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"货物位置",width:"165"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.goodsAddress,callback:function(o){e.$set(t.row,"goodsAddress",o)},expression:"scope.row.goodsAddress"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"货物真实性",width:"115"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.goodsAuthenticity,callback:function(o){e.$set(t.row,"goodsAuthenticity",o)},expression:"scope.row.goodsAuthenticity"}})]}}])})],1)],1)]),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.addContractVisible=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:e.addContract}},[e._v("保 存")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"仓单编号：",visible:e.warehouseVisible,width:"700px"},on:{"update:visible":function(t){e.warehouseVisible=t}}},[o("div",{staticClass:"head-tool"},[o("div",{staticClass:"warehouseNum"},[e._v(e._s(e.wareHouseInfo.wwNo))]),e._v(" "),o("el-autocomplete",{staticClass:"selectSearch",attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入内容"},on:{select:e.handleSelect},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}),e._v(" "),o("el-button",{staticClass:"addWarehouse",attrs:{type:"primary"},on:{click:function(t){e.deleteRecord("仓单")}}},[e._v("删除该仓单")]),e._v(" "),o("el-button",{staticClass:"addWarehouse",attrs:{type:"primary"},on:{click:function(t){e.warehouseInnerVisible=!0}}},[e._v("追加仓单")])],1),e._v(" "),o("div",{staticClass:"dialog-info"},[o("span",{staticClass:"dialog-name"},[e._v("交易客户：")]),e._v(" "),o("span",{staticClass:"dialog-company"},[e._v(e._s(e.wareHouseInfoCurrent.customerName))])]),e._v(" "),o("el-form",{staticStyle:{"margin-left":"10px"},attrs:{model:e.wareHouseInfo,rules:e.rules}},[o("el-form-item",{attrs:{label:"商品种类","label-width":e.formLabelWidth}},[e._v("\n        "+e._s(e.wareHouseInfo.goodsName)+"\n      ")]),e._v(" "),o("el-form-item",{attrs:{label:"商品名称","label-width":e.formLabelWidth}},[e._v("\n        "+e._s(e.wareHouseInfo.goodsName)+"\n      ")]),e._v(" "),o("el-form-item",{attrs:{label:"品牌/牌号","label-width":e.formLabelWidth}},[e._v("\n        "+e._s(e.wareHouseInfo.brand)+"\n      ")]),e._v(" "),o("el-form-item",{attrs:{label:"质量标准","label-width":e.formLabelWidth}},[e._v("\n        "+e._s(e.wareHouseInfo.qualityStandard)+"\n      ")]),e._v(" "),o("el-form-item",{attrs:{label:"包装规格","label-width":e.formLabelWidth}},[e._v("\n        "+e._s(e.wareHouseInfo.packingSpecification)+"\n      ")]),e._v(" "),o("el-form-item",{attrs:{label:"数量","label-width":e.formLabelWidth}},[e._v("\n        "+e._s(e.wareHouseInfo.quantity)+"\n      ")]),e._v(" "),o("el-form-item",{attrs:{label:"计量单位","label-width":e.formLabelWidth}},[e._v("\n        "+e._s(e.wareHouseInfo.unit)+"\n      ")])],1),e._v(" "),o("el-dialog",{attrs:{title:"追加仓单：",visible:e.warehouseInnerVisible,width:"1200px","append-to-body":""},on:{"update:visible":function(t){e.warehouseInnerVisible=t},close:e.clearAddWareHouseTable}},[o("div",{staticClass:"tableDate"},[o("div",{staticClass:"button",staticStyle:{width:"3%",float:"right"}},[o("P",[o("el-button",{staticClass:"el-icon-plus",on:{click:function(t){t.preventDefault(),e.addRow1()}}})],1),e._v(" "),o("p",[o("el-button",{staticClass:"el-icon-minus",on:{click:function(t){t.preventDefault(),e.delData1()}}})],1)],1),e._v(" "),o("div",{staticClass:"table"},[o("el-table",{ref:"addWareHouseTable",staticStyle:{width:"95%"},attrs:{data:e.addWareHouseTable,"tooltip-effect":"dark",border:"",stripe:""},on:{"selection-change":e.selectRow1}},[o("el-table-column",{attrs:{type:"selection",width:"45",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{label:"仓单编号",align:"center",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.wwNo,callback:function(o){e.$set(t.row,"wwNo",o)},expression:"scope.row.wwNo"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"商品名称",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.goodsName,callback:function(o){e.$set(t.row,"goodsName",o)},expression:"scope.row.goodsName"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"品牌/牌号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.brand,callback:function(o){e.$set(t.row,"brand",o)},expression:"scope.row.brand"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"质量标准",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.qualityStandard,callback:function(o){e.$set(t.row,"qualityStandard",o)},expression:"scope.row.qualityStandard"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"包装规格",width:"115"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.packingSpecification,callback:function(o){e.$set(t.row,"packingSpecification",o)},expression:"scope.row.packingSpecification"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"数量",width:"105"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.quantity,callback:function(o){e.$set(t.row,"quantity",o)},expression:"scope.row.quantity"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"计量单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.unit,callback:function(o){e.$set(t.row,"unit",o)},expression:"scope.row.unit"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"仓库名称",width:"115"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.warehouseName,callback:function(o){e.$set(t.row,"warehouseName",o)},expression:"scope.row.warehouseName"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"仓库地址",width:"205"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.warehouseAddress,callback:function(o){e.$set(t.row,"warehouseAddress",o)},expression:"scope.row.warehouseAddress"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"联系人",width:"115"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.linkman,callback:function(o){e.$set(t.row,"linkman",o)},expression:"scope.row.linkman"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"联系电话",width:"165"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.linkPhone,callback:function(o){e.$set(t.row,"linkPhone",o)},expression:"scope.row.linkPhone"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"货物位置",width:"165"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.goodsAddress,callback:function(o){e.$set(t.row,"goodsAddress",o)},expression:"scope.row.goodsAddress"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"货物真实性",width:"115"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.goodsAuthenticity,callback:function(o){e.$set(t.row,"goodsAuthenticity",o)},expression:"scope.row.goodsAuthenticity"}})]}}])})],1)],1)]),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.submitWarehouse}},[e._v("录 入")])],1)])],1),e._v(" "),o("el-dialog",{attrs:{title:"出账记录",visible:e.accountRecordVisible},on:{"update:visible":function(t){e.accountRecordVisible=t}}},[o("el-tabs",{attrs:{type:"border-card"}},[o("el-tab-pane",{attrs:{label:"支付回单"}},[o("div",{staticClass:"recordInfo"},[e._v("合同编号："+e._s(e.recordList.contractNo))]),e._v(" "),o("div",{staticClass:"recordInfo"},[e._v("交易客户："+e._s(e.recordList.customerName))]),e._v(" "),o("div",[o("el-carousel",{ref:"payCarousel",attrs:{height:"350px",autoplay:!1}},e._l(e.recordList.fileTypeZero,function(e){return o("el-carousel-item",{key:e.index},[o("img",{staticClass:"bannerImg",staticStyle:{width:"880px",height:"350px","max-width":"100%","max-height":"100%","text-align":"center"},attrs:{src:"http://192.168.2.221:8180"+e.filePath}})])}),1),e._v(" "),o("div",{staticClass:"buttonGroup"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.download(0)}}},[e._v("下载")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.deletePayRecord(0)}}},[e._v("删除")])],1)],1),e._v(" "),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.sumbitUpload(0)}}},[e._v("提交")]),e._v(" "),o("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:e.returnAction(),"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-success":e.uploadSuccess,"on-error":e.uploadError,multiple:"","on-exceed":e.handleExceed,"file-list":e.fileList,"auto-upload":!1,limit:1,data:e.uploadData(0)}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),e._v(" "),o("el-tab-pane",{attrs:{label:"增值税发票"}},[o("div",{staticClass:"recordInfo"},[e._v("合同编号："+e._s(e.recordList.contractNo))]),e._v(" "),o("div",{staticClass:"recordInfo"},[e._v("交易客户："+e._s(e.recordList.customerName))]),e._v(" "),o("div",[o("el-carousel",{ref:"payCarousel1",attrs:{height:"350px",autoplay:!1}},e._l(e.recordList.fileTypeOne,function(e){return o("el-carousel-item",{key:e.index},[o("img",{staticClass:"bannerImg",staticStyle:{width:"880px",height:"350px","max-width":"100%","max-height":"100%","text-align":"center"},attrs:{src:"http://192.168.2.221:8180"+e.filePath}})])}),1),e._v(" "),o("div",{staticClass:"buttonGroup"},[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.download(1)}}},[e._v("下载\n            ")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.deletePayRecord(1)}}},[e._v("删除")])],1)],1),e._v(" "),o("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.sumbitUpload(1)}}},[e._v("提交")]),e._v(" "),o("el-upload",{ref:"upload1",staticClass:"upload-demo",attrs:{action:e.returnAction(),"on-remove":e.handleRemove,"before-remove":e.beforeRemove,"on-success":e.uploadSuccess,"on-error":e.uploadError,multiple:"","on-exceed":e.handleExceed,"file-list":e.fileList,"auto-upload":!1,limit:1,data:e.uploadData(1)}},[o("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"保值方案",visible:e.methodVisible},on:{"update:visible":function(t){e.methodVisible=t}}},[o("el-tabs",{attrs:{type:"border-card"}},[o("el-tab-pane",{attrs:{label:"保值方案"}},[o("div",{staticClass:"program"},[e._v("\n          需提醒客户追加"+e._s(e.keepValuePlan.x>0&&isFinite(e.keepValuePlan.x)?e.tofixed(e.keepValuePlan.x):"-")+"吨的货物或"+e._s(e.keepValuePlan.y>0?e.tofixed(e.keepValuePlan.y):"-")+"元保证金。\n        ")]),e._v(" "),o("el-button",{staticClass:"dialog-button",attrs:{type:"primary"},on:{click:function(t){e.methodVisible=!1}}},[e._v("确定")])],1)],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"监控及影像信息",visible:e.monitorVisible,close:e.monitorClosed},on:{"update:visible":function(t){e.monitorVisible=t}}},[o("el-autocomplete",{attrs:{"fetch-suggestions":e.querySearchAsync,placeholder:"请输入内容"},on:{select:e.handleSelect},model:{value:e.state,callback:function(t){e.state=t},expression:"state"}}),e._v(" "),o("el-tabs",{attrs:{type:"border-card"}},[o("el-tab-pane",{attrs:{label:"仓库"}},[o("table",{staticClass:"warehouseInfo"},[o("tr",[o("th",[e._v("仓库名称")]),e._v(" "),o("td",[e._v(e._s(e.wareHouseInfo.warehouseName))])]),e._v(" "),o("tr",[o("th",[e._v("仓库地址")]),e._v(" "),o("td",[e._v(e._s(e.wareHouseInfo.warehouseAddress))])]),e._v(" "),o("tr",[o("th",[e._v("联系人")]),e._v(" "),o("td",[e._v(e._s(e.wareHouseInfo.linkman))])]),e._v(" "),o("tr",[o("th",[e._v("联系电话")]),e._v(" "),o("td",[e._v(e._s(e.wareHouseInfo.linkPhone))])]),e._v(" "),o("tr",[o("th",[e._v("货物位置")]),e._v(" "),o("td",[e._v(e._s(e.wareHouseInfo.goodsAddress))])]),e._v(" "),o("tr",[o("th",[e._v("货物真实性")]),e._v(" "),o("td",[e._v(e._s(e.wareHouseInfo.goodsAuthenticity))])])])])],1)],1)],1)},staticRenderFns:[]};var d=o("VU/8")(c,u,!1,function(e){o("5DC1")},null,null);t.default=d.exports},"3fs2":function(e,t,o){var a=o("RY/4"),r=o("dSzd")("iterator"),s=o("/bQp");e.exports=o("FeBl").getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||s[a(e)]}},"5DC1":function(e,t){},"6K4k":function(e,t){},"9bBU":function(e,t,o){o("mClu");var a=o("FeBl").Object;e.exports=function(e,t,o){return a.defineProperty(e,t,o)}},BO1k:function(e,t,o){e.exports={default:o("fxRn"),__esModule:!0}},C4MV:function(e,t,o){e.exports={default:o("9bBU"),__esModule:!0}},"RY/4":function(e,t,o){var a=o("R9M2"),r=o("dSzd")("toStringTag"),s="Arguments"==a(function(){return arguments}());e.exports=function(e){var t,o,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(o=function(e,t){try{return e[t]}catch(e){}}(t=Object(e),r))?o:s?a(t):"Object"==(i=a(t))&&"function"==typeof t.callee?"Arguments":i}},b2s4:function(e,t,o){"use strict";o.d(t,"a",function(){return a});var a={tradeWay:[{required:!0,message:"请输入交易方式",trigger:"change"}],closepositionTime:[{type:"date",required:!0,message:"请输入时间",trigger:"change"}],closepositionPrice:[{required:!0,message:"请输入平仓总价",trigger:"blur"}],closepositionOptionPrice:[{required:!0,message:"请输入平仓时间期货价格",trigger:"blur"}],username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}],newPwdConfirm:[{validator:function(e,t,o){""!==t&&t?t!==this.modifyPwdData.newPwd?o(new Error("两次输入密码不一致!")):o():o(new Error("请再次输入密码"))},trigger:"blur"}],customerName:[{required:!0,message:"请输入客户名称",trigger:"blur"}],customerNo:[{required:!0,message:"请输入客户号",trigger:"blur"}],originalPrice:[{required:!0,message:"请输入仓单原价值",trigger:"blur"}],contractNo:[{required:!0,message:"请输入合同编号",trigger:"blur"}],totalLoan:[{required:!0,message:"请输入放款金额",trigger:"blur"}],tradeEndtime:[{required:!0,message:"请输入合同交易到期日",trigger:"blur"}],customerPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"}],recoveryRate:[{required:!0,message:"请输入追保率",trigger:"blur"}],goodsCode:[{required:!0,message:"请输入仓单品种",trigger:"blur"}]}},bOdI:function(e,t,o){"use strict";t.__esModule=!0;var a,r=o("C4MV"),s=(a=r)&&a.__esModule?a:{default:a};t.default=function(e,t,o){return t in e?(0,s.default)(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}},fxRn:function(e,t,o){o("+tPU"),o("zQR9"),e.exports=o("g8Ux")},g8Ux:function(e,t,o){var a=o("77Pl"),r=o("3fs2");e.exports=o("FeBl").getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return a(t.call(e))}},mClu:function(e,t,o){var a=o("kM2E");a(a.S+a.F*!o("+E39"),"Object",{defineProperty:o("evD5").f})},"yFm/":function(e,t,o){"use strict";var a,r=o("bOdI"),s=o.n(r),i=o("b2s4"),n=o("cXVZ"),l=(a={props:["dialogFormVisible","form","dialogFormVisible1","index"],data:function(){return{formData:{},programForm:{weight:"",realDeposit:""},selectlistRow:[],addWareHouseTable:[],keepValuePlan:{},wareHouseFormVisible:this.dialogFormVisible,warningOperateVisible:this.dialogFormVisible1,warehouseInnerVisible:!1,formLabelWidth:"135px",rules:i.a,liquidated:!1,pickerOptions:{disabledDate:function(e){return e.getTime()>Date.now()}}}},watch:{dialogFormVisible:function(e){this.wareHouseFormVisible=e},dialogFormVisible1:function(e){this.warningOperateVisible=e},wareHouseFormVisible:function(e){this.$emit("dialogFormVisibleChange",e)},warningOperateVisible:function(e){this.$emit("warningOperateVisibleChange",e)}},created:function(){},methods:{liquidate:function(e,t){var o=this;this.$refs[e].validate(function(e){if(e&&0==t)o.formData.status=parseInt(t)+1,o.$confirm("是否平仓?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.axios.put(n.n+"/"+(1==o.index?o.form.formId:o.form.id),o.formData).then(function(e){200==e.data.resCode?(o.$message({type:"success",message:"已平仓!"}),o.wareHouseFormVisible=!1,o.formData={},o.$router.push("/Index"),o.$emit("searchInfo")):o.$message.error(e.data.resMsg)}).catch(function(e){console.log(e)})}).catch(function(){o.$message({type:"info",message:"已取消平仓"})});else{if(1!=t)return console.log("error submit!!"),!1;o.formData.tradeWay=o.form.tradeWay,o.formData.closepositionPrice=o.form.closepositionPrice,o.formData.closepositionTime=o.form.closepositionTime,o.formData.closepositionOptionPrice=o.form.closepositionOptionPrice,o.formData.status=parseInt(t)+1,o.$confirm("是否归档?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){o.axios.put(n.n+"/"+(1==o.index?o.form.formId:o.form.id),o.formData).then(function(e){200==e.data.resCode?(o.$message({type:"success",message:"已归档!"}),o.deleteOperateRecord(o.form.id),o.wareHouseFormVisible=!1,o.formData={},o.$router.push("/Index"),o.$emit("searchInfo")):o.$message.error(e.data.resMsg)}).catch(function(e){console.log(e)})}).catch(function(){o.$message({type:"info",message:"已取消归档"})})}})},deleteRecord:function(e){this.$emit("deleteRecord",e)},deleteOperateRecord:function(e){var t=this;this.axios.delete(n.c+"/"+e).then(function(e){200==e.data.resCode?t.$emit("searchInfo"):t.$message.error(e.data.resMsg)}).catch(function(e){console.log(e)})},addWarehouse:function(){this.warehouseInnerVisible=!0},addRow:function(){var e={rowNum:this.addWareHouseTable.length+1,wwNo:this.wwNo,goodsName:this.goodsName,brand:this.brand,qualityStandard:this.qualityStandard,packingSpecification:this.packingSpecification,quantity:this.quantity,unit:this.unit,warehouseName:this.warehouseName,warehouseAddress:this.warehouseAddress,linkman:this.linkman,linkPhone:this.linkPhone,goodsAddress:this.goodsAddress,goodsAuthenticity:this.goodsAuthenticity};this.addWareHouseTable.unshift(e)},delData:function(){for(var e=this,t=0;t<this.selectlistRow.length;t++){this.selectlistRow.forEach(function(t,o){e.addWareHouseTable.forEach(function(o,a){t.rowNum===o.rowNum&&e.addWareHouseTable.splice(a,1)})})}this.$refs.addWareHouseTable.clearSelection()},selectRow:function(e){this.selectlistRow=e},addWareHouseTableToProgram:function(){for(var e=this.addWareHouseTable,t=0,o=0;o<e.length;o++)parseInt(e[o].quantity)&&(t+=parseInt(e[o].quantity));this.programForm.weight=t,this.programForm.warehouseWarrantList=this.addWareHouseTable,this.warehouseInnerVisible=!1},submitForm:function(){var e=this;this.programForm.contractId=this.form.contractId,this.programForm.warningPrice=this.form.warningPrice,this.programForm.totalPrice=this.form.totalPrice,this.programForm.contractDeposit=this.form.deposit,this.programForm.id=this.form.formId,this.axios.post(n.x,this.programForm).then(function(t){200==t.data.resCode?(e.$message({message:t.data.resMsg,type:"success"}),e.$router.push("/Index"),e.$emit("searchInfo"),e.warningOperateVisible=!1,e.programForm={}):e.$message.error(t.data.resMsg)}).catch(function(e){console.log(e)})},tofixed:function(e){return this.common.toFixed(e)}}},s()(a,"created",function(){}),s()(a,"mounted",function(){}),s()(a,"components",{}),a),c={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("el-dialog",{attrs:{title:"处理",visible:e.wareHouseFormVisible},on:{"update:visible":function(t){e.wareHouseFormVisible=t}}},[o("span",{staticClass:"dialog-title"},[e._v("平仓信息")]),e._v(" "),o("el-form",{ref:"formData",attrs:{model:e.formData,inline:!0}},[o("el-form-item",{staticStyle:{width:"365px"},attrs:{label:"仓单编号","label-width":e.formLabelWidth}},[e._v("\n        "+e._s(e.form.wareHouseId)+"\n      ")])],1),e._v(" "),o("el-form",{ref:"formData",attrs:{model:e.formData,inline:!0,rules:e.rules}},[0==e.form.status?o("el-form-item",{staticStyle:{width:"365px"},attrs:{label:"交易方式","label-width":e.formLabelWidth,prop:"tradeWay"}},[o("el-select",{attrs:{placeholder:"请选择交易方式"},model:{value:e.formData.tradeWay,callback:function(t){e.$set(e.formData,"tradeWay",t)},expression:"formData.tradeWay"}},[o("el-option",{attrs:{label:"回购",value:"1"}}),e._v(" "),o("el-option",{attrs:{label:"抛售",value:"2"}})],1)],1):o("el-form-item",{staticStyle:{width:"365px"},attrs:{label:"交易方式","label-width":e.formLabelWidth}},[o("el-select",{attrs:{placeholder:"请选择交易方式",disabled:1==e.form.status},model:{value:e.form.tradeWay,callback:function(t){e.$set(e.form,"tradeWay",t)},expression:"form.tradeWay"}},[o("el-option",{attrs:{label:"回购",value:"1"}}),e._v(" "),o("el-option",{attrs:{label:"抛售",value:"2"}})],1)],1),e._v(" "),0==e.form.status?o("el-form-item",{attrs:{label:"平仓总价","label-width":e.formLabelWidth,prop:"closepositionPrice"}},[o("el-input",{model:{value:e.formData.closepositionPrice,callback:function(t){e.$set(e.formData,"closepositionPrice",t)},expression:"formData.closepositionPrice"}})],1):o("el-form-item",{attrs:{label:"平仓总价","label-width":e.formLabelWidth}},[o("el-input",{attrs:{disabled:1==e.form.status},model:{value:e.form.closepositionPrice,callback:function(t){e.$set(e.form,"closepositionPrice",t)},expression:"form.closepositionPrice"}})],1),e._v(" "),0==e.form.status?o("el-form-item",{staticStyle:{width:"365px"},attrs:{label:"平仓时间","label-width":e.formLabelWidth,prop:"closepositionTime"}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期时间","picker-options":e.pickerOptions,"value-format":"timestamp"},model:{value:e.formData.closepositionTime,callback:function(t){e.$set(e.formData,"closepositionTime",t)},expression:"formData.closepositionTime"}})],1):o("el-form-item",{staticStyle:{width:"365px"},attrs:{label:"平仓时间","label-width":e.formLabelWidth}},[o("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime",placeholder:"选择日期时间","value-format":"timestamp",disabled:1==e.form.status},model:{value:e.form.closepositionTime,callback:function(t){e.$set(e.form,"closepositionTime",t)},expression:"form.closepositionTime"}})],1),e._v(" "),0==e.form.status?o("el-form-item",{attrs:{label:"平仓时间期货价格","label-width":e.formLabelWidth,prop:"closepositionOptionPrice"}},[o("el-input",{model:{value:e.formData.closepositionOptionPrice,callback:function(t){e.$set(e.formData,"closepositionOptionPrice",t)},expression:"formData.closepositionOptionPrice"}})],1):o("el-form-item",{attrs:{label:"平仓时间期货价格","label-width":e.formLabelWidth}},[o("el-input",{attrs:{disabled:1==e.form.status},model:{value:e.form.closepositionOptionPrice,callback:function(t){e.$set(e.form,"closepositionOptionPrice",t)},expression:"form.closepositionOptionPrice"}})],1)],1),e._v(" "),o("div",{staticClass:"buttonGroup"},[0==e.form.status?o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.liquidate("formData",e.form.status)}}},[e._v("确认平仓")]):o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.liquidate("formData",e.form.status)}}},[e._v("确认还款并归档")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.deleteRecord("合同")}}},[e._v("删除合同")])],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.wareHouseFormVisible=!1}}},[e._v("取 消")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"处理",visible:e.warningOperateVisible},on:{"update:visible":function(t){e.warningOperateVisible=t}}},[o("el-tabs",{attrs:{type:"border-card"}},[o("el-tab-pane",{attrs:{label:"价值预警"}},[o("table",{staticClass:"value-warning"},[o("tr",[o("th",[e._v("放款金额")]),e._v(" "),o("td",[e._v(e._s(e.tofixed(e.form.totalLoan)))])]),e._v(" "),o("tr",[o("th",[e._v("仓单原价值")]),e._v(" "),o("td",[e._v(e._s(e.tofixed(e.form.originalPrice)))]),e._v(" "),o("th",[e._v("仓单现价值")]),e._v(" "),o("td",[e._v(e._s(e.tofixed(e.form.amount*e.form.goodsPrice)))])]),e._v(" "),o("tr",[o("th",[e._v("原保证金")]),e._v(" "),o("td",[e._v(e._s(e.tofixed(parseInt(e.form.originalPrice)-parseInt(e.form.totalLoan))))]),e._v(" "),o("th",[e._v("现保证金")]),e._v(" "),o("td",[e._v(e._s(e.tofixed((parseInt(e.form.deposit)?parseInt(e.form.deposit):0)+(parseInt(e.form.originalPrice)-parseInt(e.form.totalLoan)))))])])])]),e._v(" "),o("el-tab-pane",{attrs:{label:"保值方案"}},[o("div",{staticClass:"program"},[e._v("\n          需提醒客户追加"+e._s(e.form.x>0&&isFinite(e.form.x)?e.tofixed(e.form.x):"-")+"吨的货物或"+e._s(e.form.y>0?e.tofixed(e.form.y):"-")+"元保证金。\n        ")])]),e._v(" "),o("el-tab-pane",{attrs:{label:"风险处理"}},[o("div",{staticClass:"program"},[e._v("\n          客户实际追加\n          "),o("el-input",{staticStyle:{width:"120px"},attrs:{clearable:""},on:{focus:e.addWarehouse},model:{value:e.programForm.weight,callback:function(t){e.$set(e.programForm,"weight",t)},expression:"programForm.weight"}}),e._v("\n          吨的货物，\n          "),o("el-input",{staticStyle:{width:"120px"},attrs:{clearable:""},model:{value:e.programForm.realDeposit,callback:function(t){e.$set(e.programForm,"realDeposit",t)},expression:"programForm.realDeposit"}}),e._v("\n          元保证金。\n        ")],1),e._v(" "),o("el-button",{staticClass:"dialog-button",attrs:{type:"primary"},on:{click:e.submitForm}},[e._v("确定")])],1)],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"追加仓单：",visible:e.warehouseInnerVisible,width:"1200px","close-on-click-modal":!1,"append-to-body":""},on:{"update:visible":function(t){e.warehouseInnerVisible=t}}},[o("div",{staticClass:"tableDate"},[o("div",{staticClass:"button",staticStyle:{width:"3%",float:"right"}},[o("P",[o("el-button",{staticClass:"el-icon-plus",on:{click:function(t){t.preventDefault(),e.addRow()}}})],1),e._v(" "),o("p",[o("el-button",{staticClass:"el-icon-minus",on:{click:function(t){t.preventDefault(),e.delData()}}})],1)],1),e._v(" "),o("div",{staticClass:"table"},[o("el-table",{ref:"addWareHouseTable",staticStyle:{width:"95%"},attrs:{data:e.addWareHouseTable,"tooltip-effect":"dark",border:"",stripe:""},on:{"selection-change":e.selectRow}},[o("el-table-column",{attrs:{type:"selection",width:"45",align:"center"}}),e._v(" "),o("el-table-column",{attrs:{label:"仓单编号",align:"center",width:"195"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.wwNo,callback:function(o){e.$set(t.row,"wwNo",o)},expression:"scope.row.wwNo"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"商品名称",width:"90"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.goodsName,callback:function(o){e.$set(t.row,"goodsName",o)},expression:"scope.row.goodsName"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"品牌/牌号",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.brand,callback:function(o){e.$set(t.row,"brand",o)},expression:"scope.row.brand"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"质量标准",width:"110"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.qualityStandard,callback:function(o){e.$set(t.row,"qualityStandard",o)},expression:"scope.row.qualityStandard"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"包装规格",width:"115"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.packingSpecification,callback:function(o){e.$set(t.row,"packingSpecification",o)},expression:"scope.row.packingSpecification"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"数量",width:"105"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.quantity,callback:function(o){e.$set(t.row,"quantity",o)},expression:"scope.row.quantity"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"计量单位",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.unit,callback:function(o){e.$set(t.row,"unit",o)},expression:"scope.row.unit"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"仓库名称",width:"115"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.warehouseName,callback:function(o){e.$set(t.row,"warehouseName",o)},expression:"scope.row.warehouseName"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"仓库地址",width:"205"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.warehouseAddress,callback:function(o){e.$set(t.row,"warehouseAddress",o)},expression:"scope.row.warehouseAddress"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"联系人",width:"115"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.linkman,callback:function(o){e.$set(t.row,"linkman",o)},expression:"scope.row.linkman"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"联系电话",width:"165"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.linkPhone,callback:function(o){e.$set(t.row,"linkPhone",o)},expression:"scope.row.linkPhone"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"货物位置",width:"165"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.goodsAddress,callback:function(o){e.$set(t.row,"goodsAddress",o)},expression:"scope.row.goodsAddress"}})]}}])}),e._v(" "),o("el-table-column",{attrs:{label:"货物真实性",width:"115"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-input",{model:{value:t.row.goodsAuthenticity,callback:function(o){e.$set(t.row,"goodsAuthenticity",o)},expression:"scope.row.goodsAuthenticity"}})]}}])})],1)],1)]),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{attrs:{type:"primary"},on:{click:e.addWareHouseTableToProgram}},[e._v("确 定")])],1)])],1)},staticRenderFns:[]};var u=o("VU/8")(l,c,!1,function(e){o("6K4k")},null,null);t.a=u.exports}});
//# sourceMappingURL=1.f65cc82cdeacf9d3fcff.js.map